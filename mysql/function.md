# 函数 [https://dev.mysql.com/doc/refman/5.7/en/functions.html](https://dev.mysql.com/doc/refman/5.7/en/functions.html)
- [文本处理函数](#文本处理函数)
    - [子串](#子串)
    - [连接](#连接)
    - [字符串变化](#字符串变化)
- [时间和日期函数](#时间和日期函数)
- [聚合函数](#聚合函数)
    - [AVG()](#avg)
    - [SUM()](#sum)
    - [COUNT()](#count)
- [数值处理函数](#数值处理函数)
    - [三角函数](#三角函数)
    - [小数格式化](#小数格式化)
    - [数值运算](#数值运算)



*******************************************************************************
*******************************************************************************



# 文本处理函数
### 子串

FNUCTION      | DESCRIPTION
------------- | -----------
`LRFT()`      | 获取左侧字符
`RIGHT()`     | 获取右侧字符
`SUBSTRING()` | 字符串截取
`RTRIM()`     | 去掉串右边的空格
`LTRIM()`     | 去掉串左边的空格
`TRIM()`      | 去掉串左右两边的空格

```sql
SELECT LEFT('MySql',2);
+-----------------+
| LEFT('MySql',2) |
+-----------------+
| My              |
+-----------------+

SELECT SUBSTRING('MySql',1,2);
+------------------------+
| SUBSTRING('MySql',1,2) |
+------------------------+
| My                     |
+------------------------+

SELECT SUBSTRING('MySql',-2);
+-----------------------+
| SUBSTRING('MySql',-2) |
+-----------------------+
| ql                    |
+-----------------------+
```

### 连接

FNUCTION      | DESCRIPTION
------------- | -----------
`CONCAT()`    | 字符连接
`CONCAT_WS()` | 使用指定分隔符进行字符连接

```sql
SELECT CONCAT('Jack','Rose');
+-----------------------+
| CONCAT('Jack','Rose') |
+-----------------------+
| JackRose              |
+-----------------------+

SELECT CONCAT_WS('|','A','B','C');
+----------------------------+
| CONCAT_WS('|','A','B','C') |
+----------------------------+
| A|B|C                      |
+----------------------------+
```

### 字符串变化

FNUCTION      | DESCRIPTION
------------- | -----------
`UPPER()`     | 将文本转换为大写
`LOWER()`     | 将串转换为小写
`REPLACE()`   | 字符串替换
`LENGTH()`    | 返回串的长度

```sql
SELECT LOWER('MySql');
+----------------+
| mysql          |
+----------------+

SELECT REPLACE('?My??Sql???','?','|');
+--------------------------------+
| |My||Sql|||                    |
+--------------------------------+
```

# 时间和日期函数

FNUCTION     | DESCRIPTION                | OUTPUT
------------ | -------------------------- | ------
`NOW()`      | 返回当前日期和时间         | 2020-06-23 17:00:33
`CURDATE()`  | 返回当前日期               | 2020-06-23
`CURTIME()`  | 返回当前时间               | 16:58:50
`DATE()`     | 返回日期时间的日期部分     | -
`TIME()`     | 返回一个日期时间的时间部分 | -
`YEAR()`     | 返回一个日期的年份部分     | -
`MONTH()`    | 返回一个日期的月份部分     | -
`DAY()`      | 返回一个日期的天数部分     | -
`HOUR()`     | 返回一个时间的小时部分     | -
`MINUTE()`   | 返回一个时间的分钟部分     | -
`SECOND()`   | 返回一个时间的秒部分       | -
`DATEDIFF()` | 返回两个日期间隔的天数     | -

```sql
SELECT DATEDIFF('2007-12-31 23:59:59','2007-12-30');
+-----------+
| 1         |
+-----------+

SELECT DATEDIFF('2010-11-30 23:59:59','2010-12-31');
+-----------+
| 31        |
+-----------+
```

# 聚合函数

FUNCTION   | DESCRIPTION
---------- | -----------
`AVG()`    | 返回某列的平均值
`SUM()`    | 返回某列值之和
`COUNT()`  | 返回某列的行数
`MAX()`    | 返回某列的最大值
`MIN()`    | 返回某列的最小值

### AVG()
* AVG()可用来返回所有列的平均值, 也可以用来返回特定列或行的平均值
* AVG()函数忽略列值为NULL的行  

```sql
SELECT AVG(prod_price)
FROM products;
+-----------+
| 16.133571 |
+-----------+
```

### SUM()
SUM()函数忽略列值为NULL的行  

```sql
SELECT SUM(quantity)
FROM orderitems
WHERE order_num=20005;
+---------------+
|            19 |
+---------------+
```

### COUNT()
如果指定列名, 则指定列的值为空的行被COUNT()函数忽略, 但如果COUNT()函数中用的是星号(\*), 则不忽略  

```sql
SELECT COUNT(*) FROM customers;
+----------+
|        5 |
+----------+

SELECT COUNT(cust_email) FROM customers;
+-------------------+
|                 3 |
+-------------------+
```

# 数值处理函数
### 三角函数

FNUCTION     | DESCRIPTION
------------ | -----------
`Sin()`      | 返回一个角度的正弦
`Cos()`      | 返回一个角度的余弦
`Tan()`      | 返回一个角度的正切

### 小数格式化

FNUCTION     | DESCRIPTION
------------ | -----------
`CEIL()`     | 进一取整
`FLOOR()`    | 舍一取整
`FROMAT()`   | 数字格式化(四舍五入)
`TRUNCATE()` | 数字截取(舍去多余的数)

```sql
SELECT CEIL(3.01);
+------------+
|          4 |
+------------+

SELECT FORMAT(12560.745,2);
+---------------------+
| 12,560.75           |
+---------------------+

SELECT TRUNCATE(125.89,1);
+--------------------+
|              125.8 |
+--------------------+

SELECT TRUNCATE(125.89,0);
+--------------------+
|                125 |
+--------------------+

SELECT TRUNCATE(125.89,-1);
+---------------------+
|                 120 |
+---------------------+
```

### 数值运算

FNUCTION     | DESCRIPTION
------------ | -----------
`DIV()`      | 整数除法
`MOD()`      | 取余数
`POWER()`    | 幂运算
`ROUND()`    | 四舍五入
`Abs()`      | 返回一个数的绝对值
`Exp()`      | 返回一个数的指数值
`Pi()`       | 返回圆周率
`Rand()`     | 返回一个随机数
`Sqrt()`     | 返回一个数的平方根

```sql
SELECT POWER(2,3);
+------------+
|          8 |
+------------+

SELECT ROUND(3.154,1);
+----------------+
|            3.2 |
+----------------+
```
